package com.milleuros;
import java.nio.charset.StandardCharsets;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
// import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.NavigableMap;
import java.util.TreeMap;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.TimeUnit;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.rabbitmq.client.Channel;
import com.rabbitmq.client.Method;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.ConnectionFactory;
import com.rabbitmq.client.Delivery;
import com.rabbitmq.client.ShutdownListener;
import com.rabbitmq.client.ShutdownSignalException;

import com.markovngz.rabbitmq.PublisherRMQ;
import com.markovngz.http.HTTPHandler;
import com.markovngz.Config;
import com.markovngz.podcast.Podcast;

/**
 * Get podcast metadata from podcasts url 
 */
public class App {
    public static void main(String[] args) throws Exception{

        //------ 0. Setup -------------------------------------------------------------------------------------------------------
        
        Config config = new Config(new String[] {"RABBITMQ_HOST","CONSUME_QUEUE_NAME","EXCHANGE_NAME","PUBLISH_QUEUE_NAMES"}) ; 
        String rabbitMQHost = config.get("RABBITMQ_HOST") ;
        String consumingQueueName = config.get("CONSUME_QUEUE_NAME")  ; 
        String fanoutExchangeName = config.get("EXCHANGE_NAME")  ; 
        String[] publishingQueueNames = config.get("PUBLISH_QUEUE_NAMES").split(",")  ;

        ObjectMapper objectMapper = new ObjectMapper();
        HTTPHandler httpHandler = new HTTPHandler() ; 

        ConnectionFactory connectionFactory = new ConnectionFactory();
        connectionFactory.setHost(rabbitMQHost);

        Connection connection = connectionFactory.newConnection() ; 

        connection.addShutdownListener(new ShutdownListener() {
            public void shutdownCompleted(ShutdownSignalException cause)
            {
                if (cause.isHardError())
                {
                  Connection conn = (Connection)cause.getReference();
                  if (!cause.isInitiatedByApplication())
                  {
                    Method reason = cause.getReason();
                    System.out.println(reason);
                  }
                    
                } else {
                  Channel ch = (Channel)cause.getReference();
                  
                }
            }
        });
        
        //----- 1. Connect to Broker -------------------------------------------------------------------------------------------------------

        PublisherRMQ publisherRMQ = new PublisherRMQ(connection, true) ; 
        publisherRMQ.bindQueuesToFanoutExchange(fanoutExchangeName, publishingQueueNames,true,true);

        CustomConsumerRMQ consumerRMQ = new CustomConsumerRMQ(connection) ; 

        //----- 2. Consume Messages --------------------------------------------------------------------------------------------------------
        
        // container
        NavigableMap<String,Delivery> newPodcastsUrlMessages = new TreeMap<String,Delivery>() ; 

        int j = 0 ; 
        // Append message to container for callback
        consumerRMQ.consumeDelivery(consumingQueueName, false, 30, delivery -> {
            
            String url = new String(delivery.getBody(), StandardCharsets.UTF_8) ; 
            System.out.println(url)  ;
            newPodcastsUrlMessages.put(url,delivery) ; 
        });

        List<String> newPodcastsUrl = new ArrayList<String>(newPodcastsUrlMessages.keySet()) ;

        //------ 3. Process -------------------------------------------------------------------------------------------------------------------
        
        MetadataExtract metadataExtract = new MetadataExtract(newPodcastsUrl, httpHandler) ;
        Map<String,Podcast> podcastsMap = metadataExtract.getPodcastswithMediaUrls() ;
 

        //-------4. Publish + ack when publish successfull -------------------------------------------------------------------------------------
        CountDownLatch countDownLatch = new CountDownLatch(newPodcastsUrlMessages.size()) ; 
        System.out.println(newPodcastsUrlMessages.size());

        for(Map.Entry<String,Delivery> entry : newPodcastsUrlMessages.entrySet()){

            String urlKey = entry.getKey() ; 
            
            if(podcastsMap.containsKey(urlKey)){

                Podcast entryPodcast = podcastsMap.get(urlKey) ; 

                String podcastJSON = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(entryPodcast) ; 
                System.out.println("Message OK : ");
                System.out.println(podcastJSON);
                publisherRMQ.publishMessage(fanoutExchangeName, podcastJSON);
                consumerRMQ.ack(entry.getValue());

            }else{
                System.out.println("Message NACK : ");
                System.out.println(new String(entry.getValue().getBody(),StandardCharsets.UTF_8));
                consumerRMQ.nack(entry.getValue());
            }
            countDownLatch.countDown();
        }

        countDownLatch.await(30, TimeUnit.SECONDS) ; 

        connection.close() ; 
        

    }

    public static String getContent() {
                
        // String mediaUrl = "https://media.radiofrance-podcast.net/podcast09/10206-03.11.2014-ITEMA_20686570-2014F4004S0307-22.mp3" ; 

        
        // String fileName = "10206-08.10.2012-ITEMA_20408055-2012F4004S0282-22.mp3" ;

        // Date dt = metadataExtract.extractDatefromFileName(fileName) ; 

        
        // Podcast pd1 = new Podcast() ; 
        // pd1.setUrlPodcast("http://example.com");
        // pd1.setUrlsMedia("http://example.media.com");

        // Podcast pd2 = new Podcast() ; 
        // pd2.setUrlPodcast("http://example2.com");
        // pd2.setUrlsMedia("http://example2.media.com");
        // // Podcast[] podcasts = {pd1,pd2} ; 
        // List<Podcast> podcasts = Arrays.asList(new Podcast[] {pd1,pd2}) ; 
        
        return """ 
        {"type":"data","nodes":[{"type":"data","data":[{"config":1,"context":88,"metadata":93},{"kirby":2,"feedback":6,"ga":-1,"ads":10,"personalization":22,"pagination":24,"siteUrl":44,"maSaisonRadio":45,"pageLayouts":48,"captcha":66,"nonli":73,"appLinks":79,"prerollAodUrl":84,"pikapi":85,"transistorApi":86,"troubadourApi":87},{"siteId":3,"siteUrl":4,"headers":5},614404,"https://kirby.radiofrance.fr",{},{"link":7},{"default":8,"feedback":9},"https://radio-france.typeform.com/to/esIuCXdd","https://radio-france.typeform.com/to/PxxtaNcE",{"siteId":11,"site_name":20,"purposeId":21},{"radiofrance":12,"fip":13,"francebleu":14,"franceculture":15,"franceinter":16,"franceinfo":17,"francemusique":18,"mouv":19},"66952816-3623-4226-b867-8529822f6c37","286a85d2-c7ba-4ffc-92af-375f80ca5e0d","ba3dd42b-14a0-489b-a54d-005f2762fdfc","0fd25ad0-5b94-4555-91be-4fefcffd05c9","0ea8bd30-ce36-4094-b83c-df4972cf1c17","62623806-fb3e-4f7d-a280-bff6ea6fb8d4","b88fa46b-4300-4252-909d-312b6f602981","f08b86af-936c-464b-ad14-90ec66a07343","RF_radio_france","select_personalized_ads",{"purposeId":23},"recommanda-98QKJGrW",{"concept":25,"bouquet":28,"serie":29,"selection":30,"taxonomies":32,"theme":33,"subtheme":34,"subsubtheme":35,"tag":36,"personality":37,"events":38,"concepts":40,"series":41,"interpretations":42},{"pageSize":26,"maxPageNumber":27},20,50,{"pageSize":26,"maxPageNumber":27},{"pageSize":26},{"pageSize":26,"maxPageNumber":31},10,{"pageSize":26},{"pageSize":26,"maxPageNumber":27},{"pageSize":26,"maxPageNumber":27},{"pageSize":26,"maxPageNumber":27},{"pageSize":26,"maxPageNumber":27},{"pageSize":26,"maxPageNumber":27},{"pageSize":26,"timeInterval":39},180,{"pageSize":26},{"pageSize":26},{"pageSize":43},24,"https://www.radiofrance.fr",{"siteUrl":46,"enabled":47},"http://radiospective.prodmatrix.svc.cluster.local./api",false,{"homepage":49,"franceinter":52,"franceinfo":54,"francebleu":56,"franceculture":58,"francemusique":60,"fip":62,"mouv":64},[50,51],"9175e686-1859-4ee1-affd-67cb8c4b0c19","077f6181-1278-4a15-aaf8-f0070f10cb1e",[53],"a0527594-65d6-4053-b105-296a37a0e4e5",[55],"7f62c3dd-6a6a-4c47-9b97-3a3b06949668",[57],"aef46c28-c781-4aad-969f-07d908205133",[59],"0fa0b8a7-67e9-47b6-a31c-2058cd07c259",[61],"1575fd9a-8d1a-4722-b8b4-19ca379c5ca0",[63],"22d9340d-16d0-47b9-80cd-44f24dae8318",[65],"a7d74e5d-f737-4302-971a-eede84255992",{"puzzle":67,"verify":70,"sitekey":68,"endpoint":69},{"sitekey":68,"endpoint":69},"FCMI0MNA61VPFG5T","https://eu-api.friendlycaptcha.eu/api/v1/puzzle",{"secret":71,"endpoint":72},"NOPE","https://eu-api.friendlycaptcha.eu/api/v1/siteverify",{"franceinter":74,"franceculture":75,"francemusique":76,"fip":77,"mouv":78,"radiofrance":74},"BNLI-1345","BNLI-1346","BNLI-1394","BNLI-1395","BNLI-1406",{"ios":80,"android":82},{"appStoreId":81},"310211433",{"package":83},"com.radiofrance.radio.radiofrance.android","https://preroll.radiofrance.fr","https://www.radiofrance.fr/pikapi","https://api.radiofrance.fr/apprftransistor","http://troubadour.prodmurmure.svc.cluster.local.",{"station":89,"locals":90,"hasLocals":47,"selectedLocal":91,"featureFlags":92},"franceinter",{},null,[],{"kirby":94,"brand":102,"seo":106,"redirectTo":91},{"pageType":95,"pageName":96,"station":97,"chaineId":98,"conceptTitle":99,"expressionTitle":96,"diffusionId":100,"emissionId":101},"diffusion","Sp├®cial f├¬tes | 5","france_inter",1,"Le jeu des 1┬á000 Ôé¼","49ba556a-d6b8-45cd-96b4-42c237be292e","48f74c6a-eb98-11e1-a7b7-782bcb76618d",{"id":103,"title":104,"name":105},"1","France Inter","FRANCEINTER",{"title":96,"description":107,"seoTitle":108,"seoDescription":108,"seoCanonicalUrl":109,"sitemap":110,"visual":111},"Cette semaine, nous jouons d├¿s 12h30 avec des enfants, des enseignants et des voix de France Inter.","","https://www.radiofrance.fr/franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-vendredi-27-decembre-2024-2221109",true,{"model":112,"src":113,"webpSrc":114,"legend":115,"copyright":116,"author":108,"width":117,"height":118,"id":119,"type":120,"preset":121,"dominant":122,"srcset":108,"webpSrcset":108},"EmbedImage","https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/1200x680_sc_sc_1000-quizboitefamille-3d-ssfond.jpg","https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/1200x680_sc_sc_1000-quizboitefamille-3d-ssfond.webp","Le Quiz des 1000Ôé¼ en famille","Radio France",1144,648,"d0d0d1a9-e71e-420b-8e72-22ee8f1f44fa","image","1200x680","#f8f8f8"],"uses":{"url":1}},{"type":"data","data":[{"metadata":1,"publicAlertContent":31},{"kirby":2,"brand":10,"seo":14,"redirectTo":31},{"pageType":3,"pageName":4,"station":5,"chaineId":6,"conceptTitle":7,"expressionTitle":4,"diffusionId":8,"emissionId":9},"diffusion","Sp├®cial f├¬tes | 5","france_inter",1,"Le jeu des 1┬á000 Ôé¼","49ba556a-d6b8-45cd-96b4-42c237be292e","48f74c6a-eb98-11e1-a7b7-782bcb76618d",{"id":11,"title":12,"name":13},"1","France Inter","FRANCEINTER",{"title":4,"description":15,"seoTitle":16,"seoDescription":16,"seoCanonicalUrl":17,"sitemap":18,"visual":19},"Cette semaine, nous jouons d├¿s 12h30 avec des enfants, des enseignants et des voix de France Inter.","","https://www.radiofrance.fr/franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-vendredi-27-decembre-2024-2221109",true,{"model":20,"src":21,"webpSrc":22,"legend":23,"copyright":24,"author":16,"width":25,"height":26,"id":27,"type":28,"preset":29,"dominant":30,"srcset":16,"webpSrcset":16},"EmbedImage","https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/1200x680_sc_sc_1000-quizboitefamille-3d-ssfond.jpg","https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/1200x680_sc_sc_1000-quizboitefamille-3d-ssfond.webp","Le Quiz des 1000Ôé¼ en famille","Radio France",1144,648,"d0d0d1a9-e71e-420b-8e72-22ee8f1f44fa","image","1200x680","#f8f8f8",null],"uses":{"parent":1,"url":1}},{"type":"data","data":[{"metadata":1,"breadcrumbs":37,"context":47,"content":49},{"kirby":2,"brand":10,"seo":14,"redirectTo":32,"isNonLiPage":18,"nonLiProps":33,"pagination":32},{"pageType":3,"pageName":4,"station":5,"chaineId":6,"conceptTitle":7,"expressionTitle":4,"diffusionId":8,"emissionId":9},"diffusion","Sp├®cial f├¬tes | 5","france_inter",1,"Le jeu des 1┬á000 Ôé¼","49ba556a-d6b8-45cd-96b4-42c237be292e","48f74c6a-eb98-11e1-a7b7-782bcb76618d",{"id":11,"title":12,"name":13},"1","France Inter","FRANCEINTER",{"title":4,"description":15,"seoTitle":16,"seoDescription":16,"seoCanonicalUrl":17,"sitemap":18,"visual":19,"ogType":31},"Cette semaine, nous jouons d├¿s 12h30 avec des enfants, des enseignants et des voix de France Inter.","","https://www.radiofrance.fr/franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-vendredi-27-decembre-2024-2221109",true,{"model":20,"src":21,"webpSrc":22,"legend":23,"copyright":24,"author":16,"width":25,"height":26,"id":27,"type":28,"preset":29,"dominant":30,"srcset":16,"webpSrcset":16},"EmbedImage","https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/1200x680_sc_sc_1000-quizboitefamille-3d-ssfond.jpg","https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/1200x680_sc_sc_1000-quizboitefamille-3d-ssfond.webp","Le Quiz des 1000Ôé¼ en famille","Radio France",1144,648,"d0d0d1a9-e71e-420b-8e72-22ee8f1f44fa","image","1200x680","#f8f8f8","article",null,{"publisherUrl":34,"publishedTime":35,"modifiedTime":35,"theme":36,"tags":36,"author":-1},"https://www.facebook.com/franceinter","2024-12-27T11:31:10.000Z","Arts et Divertissement",[38,40,43,45],{"label":12,"link":39},"franceinter",{"label":41,"link":42},"Podcasts","/franceinter/podcasts",{"label":7,"link":44},"franceinter/podcasts/le-jeu-des-1000",{"label":4,"link":46},"franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-vendredi-27-decembre-2024-2221109",{"station":39,"pageType":48},"Expression",{"model":48,"id":8,"title":4,"conceptTitle":7,"seoTitle":16,"seoDescription":16,"stationIds":50,"kind":51,"type":52,"path":46,"migrated":18,"standFirst":15,"publishedDate":53,"brandEnums":54,"isPad":55,"place":32,"isExpired":55,"printProgMusic":18,"latestRediffusion":32,"magnetothequeId":56,"reactAvailable":55,"bodyJson":57,"selections":90,"startDate":53,"endDate":91,"guest":92,"serie":32,"series":93,"visual_640x340":94,"visual_870x489":100,"visual_1200x680":106,"squaredVisual":107,"producers":115,"staff":130,"composer":138,"conductor":139,"orchestra":140,"choir":141,"choirmaster":142,"soloist":143,"themes":144,"tagsAndPersonalities":148,"concept":149,"manifestations":167,"audioTranscript":32,"videos":187,"mainResource":32,"interpretations":188,"concerts":189,"authors":190,"manualUpdate":53,"songs":191,"songsCursor":32,"previousPodcasts":192,"relatedItems":332,"infoItems":32,"video":-1,"selectionFromConcept":32,"selectionConcepts":32,"background":333,"visual":336,"timeshiftStreams":338},[6],"antenne","episode",1735299070,[13],false,"2024F4004S0362",[58,66,72,78,84],{"type":59,"children":60},"text",[61],{"type":62,"data":63,"value":65},"link",{"href":64},"https://www.radiofrance.com/les-editions/livre/le-quiz-des-1000eu-en-famille","Ôû║Ôû║Ôû║┬áNouveau┬á: le Quiz des 1000 euros en famille┬á!",{"type":59,"children":67},[68],{"type":62,"data":69,"value":71},{"href":70},"https://www.instagram.com/lejeudes1000euros/","Ôû║Ôû║Ôû║ Suivez-nous sur Instagram",{"type":59,"children":73},[74],{"type":62,"data":75,"value":77},{"href":76},"https://www.radiofrance.fr/franceinter/le-jeu-des-1000-en-public-1293087","Ôû║Ôû║Ôû║ Nos prochains enregistrements en public",{"type":59,"children":79},[80],{"type":62,"data":81,"value":83},{"href":82},"https://www.franceinter.fr/culture/proposez-votre-question-pour-le-jeu-des-1000-euros","Ôû║Ôû║Ôû║ Envoyez vos questions pour le jeu",{"type":59,"children":85},[86],{"type":62,"data":87,"value":89},{"href":88},"https://www.franceinter.fr/culture/le-jeu-chez-vous","Ôû║Ôû║Ôû║ Posez la candidature de votre commune",[],1735300799,[],[],{"model":20,"src":95,"webpSrc":96,"legend":23,"copyright":24,"author":16,"width":97,"height":98,"id":27,"type":28,"preset":99,"dominant":30},"https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/640x340_sc_sc_1000-quizboitefamille-3d-ssfond.jpg","https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/640x340_sc_sc_1000-quizboitefamille-3d-ssfond.webp",640,340,"640x340",{"model":20,"src":101,"webpSrc":102,"legend":23,"copyright":24,"author":16,"width":103,"height":104,"id":27,"type":28,"preset":105,"dominant":30},"https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/870x489_sc_sc_1000-quizboitefamille-3d-ssfond.jpg","https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/870x489_sc_sc_1000-quizboitefamille-3d-ssfond.webp",870,489,"870x489",{"model":20,"src":21,"webpSrc":22,"legend":23,"copyright":24,"author":16,"width":25,"height":26,"id":27,"type":28,"preset":29,"dominant":30},{"model":20,"src":108,"webpSrc":109,"legend":110,"copyright":24,"author":32,"width":111,"height":111,"id":112,"type":28,"preset":113,"dominant":114,"srcset":16,"webpSrcset":16},"https://www.radiofrance.fr/s3/cruiser-production/2023/04/05fcb491-76d5-46e8-9fa4-54f05a8bfaf5/400x400_sc_le-jeu-des-mille-euros.jpg","https://www.radiofrance.fr/s3/cruiser-production/2023/04/05fcb491-76d5-46e8-9fa4-54f05a8bfaf5/400x400_sc_le-jeu-des-mille-euros.webp","Le jeu des 1000 euros",400,"05fcb491-76d5-46e8-9fa4-54f05a8bfaf5","400x400","#f87848",[116],{"id":117,"name":118,"lastName":119,"path":120,"migrated":18,"role":121,"fonction":122,"visual":123},"4484b9e2-9bea-11e0-b8ee-842b2b72cd1d","Nicolas Stoufflet","Stoufflet","personnes/nicolas-stoufflet","production","Producteur de radio et animateur fran├ºais",{"model":20,"src":124,"webpSrc":125,"legend":118,"copyright":24,"author":126,"width":127,"height":127,"id":128,"type":28,"preset":129,"dominant":32},"https://www.radiofrance.fr/s3/cruiser-production/2016/09/460b8d9e-3f81-4b78-bdb7-122cbd5a2c64/120x120_stoufflet_nicolas.jpg","https://www.radiofrance.fr/s3/cruiser-production/2016/09/460b8d9e-3f81-4b78-bdb7-122cbd5a2c64/120x120_stoufflet_nicolas.webp","Christophe Abramowitz",120,"460b8d9e-3f81-4b78-bdb7-122cbd5a2c64","120x120",[131],{"id":132,"name":133,"lastName":134,"path":135,"migrated":18,"role":136,"fonction":137,"visual":32},"6a0ad30e-9bea-11e0-b8ee-842b2b72cd1d","Yann Pailleret","Pailleret","personnes/yann-pailleret","realisation","R├®alisateur",[],[],[],[],[],[],[145],{"id":146,"title":36,"migrated":18,"path":147,"parent":32},"8b78fb1a-bf1e-436e-a2fc-4375fa38154b","arts-divertissements",[],{"model":150,"id":9,"title":7,"path":44,"hasChronics":55,"visuals":151,"squaredVisual":154,"pageReacts":155,"connections":156,"producers":-1,"lastEpisodeWithinTwoMonths":-1,"staff":-1,"podcast":163,"associatedTemplates":32},"Concept",{"model":20,"src":152,"webpSrc":153,"legend":110,"copyright":24,"author":32,"width":127,"height":127,"id":112,"type":28,"preset":129,"dominant":114,"srcset":16,"webpSrcset":16},"https://www.radiofrance.fr/s3/cruiser-production/2023/04/05fcb491-76d5-46e8-9fa4-54f05a8bfaf5/120x120_sc_le-jeu-des-mille-euros.jpg","https://www.radiofrance.fr/s3/cruiser-production/2023/04/05fcb491-76d5-46e8-9fa4-54f05a8bfaf5/120x120_sc_le-jeu-des-mille-euros.webp",{"model":20,"src":108,"webpSrc":109,"legend":110,"copyright":24,"author":32,"width":111,"height":111,"id":112,"type":28,"preset":113,"dominant":114,"srcset":16,"webpSrcset":16},[],[157,160],{"type":158,"title":32,"url":159},"facebook","https://www.facebook.com/NicolasStoufflet",{"type":161,"title":32,"url":162},"mail","/franceinter/contact/formulaire?concept=48f74c6a-eb98-11e1-a7b7-782bcb76618d",{"rss":164,"itune":165},"https://radiofrance-podcast.net/podcast09/rss_10206.xml",{"url":166},"https://podcasts.apple.com/fr/podcast/le-jeu-des-1000-euros/id306769782",[168,180],{"model":169,"id":170,"url":171,"duration":172,"principal":18,"preset":173},"ManifestationAudio","723f4b28-aa3a-49c2-a2fa-abd4d9b723c3","https://media.radiofrance-podcast.net/podcast09/10206-27.12.2024-ITEMA_23977460-2024F4004S0362-22.mp3",1628,{"id":174,"name":175,"encoding":176,"bitrate":177,"frequency":178,"level":179},"22","stereo","MP3",128,44.1,"-16LUFS (st├®r├®o + compression ÔÇ£FINTERÔÇØ)",{"model":169,"id":181,"url":182,"duration":183,"principal":55,"preset":184},"e83c1fec-4aca-4367-a041-3092092003cf","https://media.radiofrance-podcast.net/podcast09/22898-27.12.2024-ITEMA_23977839-2024F4004S0362-21.mp3",1626,{"id":185,"name":175,"encoding":176,"bitrate":177,"frequency":178,"level":186},"21","-15LUFS (st├®r├®o)",[],[],[],[],[],[193,227,253,281,304],{"playerInfo":194,"visual":214,"duration":220,"id":201,"isExpired":55,"model":48,"manifestations":221,"title":199,"variant":222,"link":223,"brandName":39,"description":15,"icon":224,"date":225,"firstLineText":16,"firstLineLink":16,"conceptId":9,"tracking":226},{"startDate":195,"endDate":196,"publishedDate":195,"playerMetadata":197,"media":202},1735212670,1735214399,{"brandName":-1,"cover":198,"firstLine":7,"firstLinePath":44,"secondLine":199,"secondLinePath":200,"conceptUuid":9,"expressionUuid":201,"firstLinePathConceptUuid":9,"firstLineUuid":201,"uuid":201,"transcript":55},{"src":108},"Sp├®cial f├¬tes | 4","franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-jeudi-26-decembre-2024-4685336","a0dda34f-60f9-41ec-8f9f-a6a403072d50",{"sources":203},[204,209],{"model":169,"id":205,"title":199,"url":206,"created":196,"duration":207,"shareable":55,"principal":18,"preset":208},"4cc8e3b0-012d-4182-9b14-d277d62640d0","https://media.radiofrance-podcast.net/podcast09/10206-26.12.2024-ITEMA_23976448-2024F4004S0361-22.mp3",1609,{"id":174,"name":175,"encoding":176,"bitrate":177,"frequency":178,"level":179},{"model":169,"id":210,"title":199,"url":211,"created":196,"duration":212,"shareable":55,"principal":55,"preset":213},"21d541d7-65c7-4842-b9b1-707a01861c67","https://media.radiofrance-podcast.net/podcast09/22898-26.12.2024-ITEMA_23976823-2024F4004S0361-21.mp3",1608,{"id":185,"name":175,"encoding":176,"bitrate":177,"frequency":178,"level":186},{"model":20,"src":215,"webpSrc":216,"legend":23,"copyright":24,"author":16,"width":217,"height":218,"id":27,"type":28,"preset":219,"dominant":30,"srcset":16,"webpSrcset":16},"https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/560x315_sc_sc_1000-quizboitefamille-3d-ssfond.jpg","https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/560x315_sc_sc_1000-quizboitefamille-3d-ssfond.webp",560,315,"560x315","26 min",[204,209],"vertical","/franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-jeudi-26-decembre-2024-4685336","play","26 d├®c.",{"id_chaine":6,"emission":7,"id_emission":9,"diffusion":199,"id_diffusion":201,"type_card":52},{"playerInfo":228,"visual":248,"duration":220,"id":235,"isExpired":55,"model":48,"manifestations":249,"title":233,"variant":222,"link":250,"brandName":39,"description":15,"icon":224,"date":251,"firstLineText":16,"firstLineLink":16,"conceptId":9,"tracking":252},{"startDate":229,"endDate":230,"publishedDate":229,"playerMetadata":231,"media":236},1735126270,1735127999,{"brandName":-1,"cover":232,"firstLine":7,"firstLinePath":44,"secondLine":233,"secondLinePath":234,"conceptUuid":9,"expressionUuid":235,"firstLinePathConceptUuid":9,"firstLineUuid":235,"uuid":235,"transcript":55},{"src":108},"Sp├®cial f├¬tes | 3","franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-mercredi-25-decembre-2024-5851601","a1f3ef01-f5c0-46f4-b1ab-636ea095ea5d",{"sources":237},[238,243],{"model":169,"id":239,"title":233,"url":240,"created":230,"duration":241,"shareable":55,"principal":18,"preset":242},"5b0d6180-ae3e-45c9-ae1a-7118c870094f","https://media.radiofrance-podcast.net/podcast09/10206-25.12.2024-ITEMA_23975634-2024F4004S0360-22.mp3",1613,{"id":174,"name":175,"encoding":176,"bitrate":177,"frequency":178,"level":179},{"model":169,"id":244,"title":233,"url":245,"created":230,"duration":246,"shareable":55,"principal":55,"preset":247},"63593547-8e38-4f43-b892-b046f62e03b5","https://media.radiofrance-podcast.net/podcast09/22898-25.12.2024-ITEMA_23976004-2024F4004S0360-21.mp3",1611,{"id":185,"name":175,"encoding":176,"bitrate":177,"frequency":178,"level":186},{"model":20,"src":215,"webpSrc":216,"legend":23,"copyright":24,"author":16,"width":217,"height":218,"id":27,"type":28,"preset":219,"dominant":30,"srcset":16,"webpSrcset":16},[238,243],"/franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-mercredi-25-decembre-2024-5851601","25 d├®c.",{"id_chaine":6,"emission":7,"id_emission":9,"diffusion":233,"id_diffusion":235,"type_card":52},{"playerInfo":254,"visual":275,"duration":276,"id":261,"isExpired":55,"model":48,"manifestations":277,"title":259,"variant":222,"link":278,"brandName":39,"description":15,"icon":224,"date":279,"firstLineText":16,"firstLineLink":16,"conceptId":9,"tracking":280},{"startDate":255,"endDate":256,"publishedDate":255,"playerMetadata":257,"media":262},1735039870,1735041600,{"brandName":-1,"cover":258,"firstLine":7,"firstLinePath":44,"secondLine":259,"secondLinePath":260,"conceptUuid":9,"expressionUuid":261,"firstLinePathConceptUuid":9,"firstLineUuid":261,"uuid":261,"transcript":55},{"src":108},"Sp├®cial f├¬tes | 2","franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-mardi-24-decembre-2024-7488334","c2ad5d26-412b-466f-b592-93e5ede16dd3",{"sources":263},[264,270],{"model":169,"id":265,"title":259,"url":266,"created":267,"duration":268,"shareable":55,"principal":18,"preset":269},"cf11f4d1-f9cb-4426-8602-ea75d44c827d","https://media.radiofrance-podcast.net/podcast09/10206-24.12.2024-ITEMA_23974710-2024F4004S0359-22.mp3",1735041599,1730,{"id":174,"name":175,"encoding":176,"bitrate":177,"frequency":178,"level":179},{"model":169,"id":271,"title":259,"url":272,"created":267,"duration":273,"shareable":55,"principal":55,"preset":274},"661757bd-6cf8-438c-8ae5-e1c9fdfbdd25","https://media.radiofrance-podcast.net/podcast09/22898-24.12.2024-ITEMA_23975087-2024F4004S0359-21.mp3",1729,{"id":185,"name":175,"encoding":176,"bitrate":177,"frequency":178,"level":186},{"model":20,"src":215,"webpSrc":216,"legend":23,"copyright":24,"author":16,"width":217,"height":218,"id":27,"type":28,"preset":219,"dominant":30,"srcset":16,"webpSrcset":16},"28 min",[264,270],"/franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-mardi-24-decembre-2024-7488334","24 d├®c.",{"id_chaine":6,"emission":7,"id_emission":9,"diffusion":259,"id_diffusion":261,"type_card":52},{"playerInfo":282,"visual":298,"duration":299,"id":289,"isExpired":55,"model":48,"manifestations":300,"title":287,"variant":222,"link":301,"brandName":39,"description":15,"icon":224,"date":302,"firstLineText":16,"firstLineLink":16,"conceptId":9,"tracking":303},{"startDate":283,"endDate":284,"publishedDate":283,"playerMetadata":285,"media":290},1734953470,1734955114,{"brandName":-1,"cover":286,"firstLine":7,"firstLinePath":44,"secondLine":287,"secondLinePath":288,"conceptUuid":9,"expressionUuid":289,"firstLinePathConceptUuid":9,"firstLineUuid":289,"uuid":289,"transcript":55},{"src":108},"Sp├®cial f├¬tes | 1","franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-speciale-fetes-du-lundi-23-decembre-2024-5627306","4fa2a579-46cd-47d4-a0e0-d52fc9d314df",{"sources":291},[292],{"model":169,"id":293,"title":287,"url":294,"created":295,"duration":296,"shareable":55,"principal":18,"preset":297},"87ccfb60-4998-4e3d-b018-aa6b2e54a52e","https://media.radiofrance-podcast.net/podcast09/10206-23.12.2024-ITEMA_23973811-2024F4004S0358-22.mp3",1734955199,1645,{"id":174,"name":175,"encoding":176,"bitrate":177,"frequency":178,"level":179},{"model":20,"src":215,"webpSrc":216,"legend":23,"copyright":24,"author":16,"width":217,"height":218,"id":27,"type":28,"preset":219,"dominant":30,"srcset":16,"webpSrcset":16},"27 min",[292],"/franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-speciale-fetes-du-lundi-23-decembre-2024-5627306","23 d├®c.",{"id_chaine":6,"emission":7,"id_emission":9,"diffusion":287,"id_diffusion":289,"type_card":52},{"playerInfo":305,"visual":325,"duration":326,"id":312,"isExpired":55,"model":48,"manifestations":327,"title":310,"variant":222,"link":328,"brandName":39,"description":329,"icon":224,"date":330,"firstLineText":16,"firstLineLink":16,"conceptId":9,"tracking":331},{"startDate":306,"endDate":307,"publishedDate":306,"playerMetadata":308,"media":313},1734695110,1734695999,{"brandName":-1,"cover":309,"firstLine":7,"firstLinePath":44,"secondLine":310,"secondLinePath":311,"conceptUuid":9,"expressionUuid":312,"firstLinePathConceptUuid":9,"firstLineUuid":312,"uuid":312,"transcript":55},{"src":108},"├á Poitiers | 5","franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-vendredi-20-decembre-2024-8260271","120c1da6-c506-44ed-9103-6b5644357ae7",{"sources":314},[315,320],{"model":169,"id":316,"title":310,"url":317,"created":307,"duration":318,"shareable":55,"principal":18,"preset":319},"4cdfebf1-7f6a-480e-83e9-c9aae1e06428","https://media.radiofrance-podcast.net/podcast09/10206-20.12.2024-ITEMA_23971388-2024F4004S0355-22.mp3",791,{"id":174,"name":175,"encoding":176,"bitrate":177,"frequency":178,"level":179},{"model":169,"id":321,"title":310,"url":322,"created":307,"duration":323,"shareable":55,"principal":55,"preset":324},"709092ec-adb8-413d-9ca5-6a14e8842f95","https://media.radiofrance-podcast.net/podcast09/22898-20.12.2024-ITEMA_23971866-2024F4004S0355-21.mp3",790,{"id":185,"name":175,"encoding":176,"bitrate":177,"frequency":178,"level":186},{"model":20,"src":215,"webpSrc":216,"legend":23,"copyright":24,"author":16,"width":217,"height":218,"id":27,"type":28,"preset":219,"dominant":30,"srcset":16,"webpSrcset":16},"13 min",[315,320],"/franceinter/podcasts/le-jeu-des-1-000/le-jeu-des-1000-du-vendredi-20-decembre-2024-8260271","Et ├á demain samedi sur France 3 ├á 16h45 !","20 d├®c.",{"id_chaine":6,"emission":7,"id_emission":9,"diffusion":310,"id_diffusion":312,"type_card":52},[],{"model":20,"src":21,"webpSrc":22,"legend":23,"copyright":24,"author":16,"width":25,"height":26,"id":27,"type":28,"preset":29,"dominant":30,"srcset":334,"webpSrcset":335},"https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/640x340_sc_sc_1000-quizboitefamille-3d-ssfond.jpg 640w, https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/870x489_sc_sc_1000-quizboitefamille-3d-ssfond.jpg 870w, https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/1200x680_sc_sc_1000-quizboitefamille-3d-ssfond.jpg 1200w","https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/640x340_sc_sc_1000-quizboitefamille-3d-ssfond.webp 640w, https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/870x489_sc_sc_1000-quizboitefamille-3d-ssfond.webp 870w, https://www.radiofrance.fr/s3/cruiser-production-eu3/2024/11/e7bb3e0f-0693-45d8-9ac4-de4fc5f55450/1200x680_sc_sc_1000-quizboitefamille-3d-ssfond.webp 1200w",{"model":20,"src":95,"webpSrc":96,"legend":337,"copyright":24,"author":16,"width":97,"height":98,"id":27,"type":28,"preset":99,"dominant":30,"srcset":16,"webpSrcset":16},"Le Quiz des 1000Ôé¼ en famille ┬®Radio France",[]],"uses":{"search_params":["page","p","radio"],"params":["slug"],"parent":1,"url":1}}]} 
    """;}

}

